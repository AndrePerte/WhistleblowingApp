@model WhistleblowingApp.Models.Segnalazione

<div class="success-container">
    <h1 class="success-title">Segnalazione inviata con Successo</h1>
    <p class="success-desc">
        Il seguente Ã¨ il codice con cui potrai accedervi.<br />
        Ricorda di copiarlo e conservarlo per poter accedere a questa segnalazione e al suo esito.
    </p>
    <div class="success-code-row">
        <span class="success-code">@Model.Codice</span>
        <button onclick="copyCode(this)" class="success-copy-btn">Copia</button>
    </div>
    <div class="success-checkbox-row">
        <input type="checkbox" id="confirmCheck" class="success-checkbox" />
        <label for="confirmCheck" class="success-checkbox-label">Confermo di aver copiato il codice</label>
    </div>
    <a id="continueLink" class="success-view-btn" disabled>Vedi Segnalazione</a>
</div>

@section Scripts {
<script>
    function copyCode(btn) {
        const code = document.querySelector('.success-code').textContent;
        navigator.clipboard.writeText(code).then(function () {
            const originalText = btn.textContent;
            btn.textContent = 'Copiato!';
            btn.style.backgroundColor = '#169965';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.backgroundColor = '';
            }, 3000);
        }).catch(function (err) {
            alert('Errore durante la copia: ' + err);
        });
    }
    document.addEventListener("DOMContentLoaded", function () {
        const checkbox = document.getElementById('confirmCheck');
        const link = document.getElementById('continueLink');
        link.href = '@Url.Action("Dettagli", "Segnalazione")?id=@Model.Id';
        checkbox.addEventListener('change', function () {
            if (this.checked) {
                link.removeAttribute('disabled');
            } else {
                link.setAttribute('disabled', '');
            }
        });
        link.addEventListener('click', function (e) {
            if (!checkbox.checked) {
                e.preventDefault();
            }
        });
    });
</script>
}